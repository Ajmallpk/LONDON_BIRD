{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Suruchi - Order #{{ order.id }}</title>
    <meta name="description" content="Modern Bootstrap HTML5 Template">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'assets/img/favicon.ico' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/swiper-bundle.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/glightbox.min.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'assets/css/vendor/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
    <style>
        .order__detail__section { padding: 50px 0; }
        .card { border-radius: 10px; }
        .card-header { background-color: #28a745; color: white; }
        .btn-primary { background-color: #28a745; border-color: #28a745; }
        .btn-primary:hover { background-color: #218838; border-color: #1e7e34; }
        .btn-danger { background-color: #dc3545; border-color: #dc3545; }
        .btn-danger:hover { background-color: #c82333; border-color: #bd2130; }
        .btn-warning { background-color: #ff851b; border-color: #ff851b; }
        .btn-warning:hover { background-color: #e07b00; border-color: #d97400; }
        .status-badge { padding: 5px 10px; border-radius: 5px; color: white; font-size: 0.9em; }
        .alert { padding: 10px; border-radius: 5px; margin-bottom: 10px; }
        .alert-success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .alert-error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .product-img { width: 60px; height: 60px; object-fit: cover; border-radius: 5px; margin-right: 15px; }
    </style>
</head>
<body>
    <div id="preloader">
        <div id="ctn-preloader" class="ctn-preloader">
            <div class="animation-preloader">
                <div class="spinner"></div>
                <div class="txt-loading">
                    <span data-text-preloader="L" class="letters-loading">L</span>
                    <span data-text-preloader="O" class="letters-loading">O</span>
                    <span data-text-preloader="A" class="letters-loading">A</span>
                    <span data-text-preloader="D" class="letters-loading">D</span>
                    <span data-text-preloader="I" class="letters-loading">I</span>
                    <span data-text-preloader="N" class="letters-loading">N</span>
                    <span data-text-preloader="G" class="letters-loading">G</span>
                </div>
            </div>
            <div class="loader-section section-left"></div>
            <div class="loader-section section-right"></div>
        </div>
    </div>


    

    <main class="main__content_wrapper">
        <!-- <section class="breadcrumb__section breadcrumb__bg">
            <div class="container">
                <div class="row row-cols-1">
                    <div class="col">
                        <div class="breadcrumb__content text-center">
                            <h1 class="breadcrumb__content--title text-white mb-25">Order Details</h1>
                            <ul class="breadcrumb__content--menu d-flex justify-content-center">
                                <li class="breadcrumb__content--menu__items"><a class="text-white" href="{% url 'index' %}">Home</a></li>
                                <li class="breadcrumb__content--menu__items"><a class="text-white" href="{% url 'order_list' %}">My Orders</a></li>
                                <li class="breadcrumb__content--menu__items"><span class="text-white">Order #{{ order.id }}</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section> -->
                <section class="breadcrumb__section breadcrumb__bg"
         style="background-image: url('{% static "assets/img/banner/38150.jpg" %}'); 
                background-size: cover; 
                background-position: center; 
                background-repeat: no-repeat; 
                width: 100%; 
                min-height: 200px; 
                padding: 40px 15px; 
                display: flex; 
                align-items: center;">
    <div class="container" style="width: 100%;">
        <div class="row row-cols-1">
            <div class="col">
                <div class="breadcrumb__content text-center">
                    <h1 class="breadcrumb__content--title text-white mb-25" style="font-size: 2rem;">My Profile</h1>
                    <ul class="breadcrumb__content--menu d-flex justify-content-center" style="gap: 10px; flex-wrap: wrap; list-style: none; padding: 0; margin: 0;">
                        <li class="breadcrumb__content--menu__items">
                            <a class="text-white" href="{% url 'index' %}" style="color: white; text-decoration: none;">Home</a>
                        </li>
                        <li class="breadcrumb__content--menu__items"><a class="text-white" href="{% url 'order_list' %}">My Orders</a></li>
                        <li class="breadcrumb__content--menu__items"><span class="text-white">Order ID #{{ order.id }}</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>

        <section class="order__detail__section section--padding">
            <div class="container">
                <div id="messages" class="messages">
                    {% if messages %}
                        {% for message in messages %}
                            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="row">
                    <div class="col-lg-8">
                        <div class="card mb-4">
                            <div class="card-header">
                                <h3>Order Items</h3>
                            </div>
                            <div class="card-body">
                                {% for item in order_items %}
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <div class="d-flex align-items-center">
                                            {% if item.product.image_1 %}
                                                <img src="{{ item.product.image_1.url }}" alt="{{ item.product.name }}" class="product-img">
                                            {% else %}
                                                <img src="{% static 'assets/img/placeholder.png' %}" alt="No Image" class="product-img">
                                            {% endif %}
                                            <div>
                                                <strong>{{ item.product.name }} ({{ item.size.size }})</strong> x {{ item.quantity }}<br>
                                                <span class="status-badge" style="background-color: {{ item.status_color }}">{{ order.get_status_display }}</span>
                                                {% if item.cancel_reason %}
                                                    <p><small><strong>Cancel Reason:</strong> {{ item.cancel_reason }}</small></p>
                                                {% endif %}
                                                {% if item.return_reason %}
                                                    <p><small><strong>Return Reason:</strong> {{ item.return_reason }}</small></p>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div>
                                            ₹{{ item.price|floatformat:2 }}<br>
                                            {% if order.status == 'delivered' %}
                                                <a href="{% url 'return_reason' order.id item.id  %}" class="btn btn-warning btn-sm">Request Return</a>
                                            {% endif %}
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card mb-4">
                            <div class="card-header">
                                <h3>Order Summary</h3>
                            </div>
                            <div class="card-body">
                                <p><strong>Order ID:</strong> {{ order.id }}</p>
                                <p><strong>Date:</strong> {{ order.created_at|date:"Y-m-d H:i" }}</p>
                                <p><strong>Total:</strong> ₹{{ order.total_price|floatformat:2 }}</p>
                                <p><strong>Status:</strong> {{ order.get_status_display }}</p>
                                <p><strong>Payment Method:</strong> {{ order.payment_method }}</p>
                                <p><strong>Payment Status:</strong> {{ order.payment_status }}</p>
                                {% if can_cancel_order %}
                                    <a href="{% url 'cancel_reason' order.id %}" class="btn btn-danger w-100">Cancel Order</a>
                                {% endif %}
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <h3>Shipping Address</h3>
                            </div>
                            <div class="card-body">
                                {% if order.shipping_address %}
                                    <p><strong>{{ order.shipping_address.name }}</strong></p>
                                    <p>{{ order.shipping_address.address }}</p>
                                    <p>{{ order.shipping_address.city }}, {{ order.shipping_address.state }} {{ order.shipping_address.postcode }}</p>
                                    <p>{{ order.shipping_address.country }}</p>
                                    <p>Phone: {{ order.shipping_address.phone }}</p>
                                {% else %}
                                    <p>No shipping address set.</p>
                                {% endif %}
                                {% if order.status == 'delivered' %}
                                    <a href="{% url 'download_invoice' order.id %}" class="btn btn-sm btn-secondary">Download Invoice</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div style="display: flex; justify-content: center; align-items: center; width: 100%; margin-bottom: 20px;">
    <a href="{% url 'order_list' %}" 
       style="padding: 10px 20px; font-size: 16px; background-color: #0d6efd; color: white; text-decoration: none; border: none; border-radius: 5px; width: 100%; max-width: 300px; text-align: center; display: inline-block;">
        ← Back to Orders
    </a>
</div>

        </section>
    </main>

    <button id="scroll__top"><svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="48" d="M112 244l144-144 144 144M256 120v292"/></svg></button>

    <script src="{% static 'assets/js/vendor/popper.js' %}" defer="defer"></script>
    <script src="{% static 'assets/js/vendor/bootstrap.min.js' %}" defer="defer"></script>
    <script src="{% static 'assets/js/plugins/swiper-bundle.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/glightbox.min.js' %}"></script>
    <script src="{% static 'assets/js/script.js' %}"></script>
</body>
</html>